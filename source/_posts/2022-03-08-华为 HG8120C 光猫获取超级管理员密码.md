---
title: 华为 HG8120C 光猫获取超级管理员密码
tags:
  - 光猫
cover: 'https://s2.loli.net/2022/03/09/DZ1vi9bEaGPkI2o.jpg'
abbrlink: 336738f7
date: 2022-03-08 20:54:52
---

因为需要端口转发、路由改桥接等功能，默认的 useradmin 账号权限不够，只能使用 telecomadmin 这个超级管理员账号进入修改。网上的教程有点问题，如果不进行 shell 补全，可能无法运行 backup 命令，把 hw_ctree.xml 这个文件复制到本地。

<!--more-->

以下是光猫的信息，供参考：
> 运营商：中国电信
> 城市：湖北宜昌
> 型号：华为HG8120C EPON
> 软件版本：V3R018C10S115

需要用到的工具在[这里下载](https://pan.baidu.com/s/1uYY3584wdeOAjrwRbV0PYw?pwd=5vp4)，我把网上的 ONT 使能工具换成另外的版本了，不然无法成功，光猫那一排指示灯不会常亮。需要用到的只有 `华为光猫ONT使能2.0.exe` 和 `putty.exe`，其他的工具也保留了，网友们各取所需。图片我也不放了（偷懒），操作很简单，网上都有。

### 开启 Telnet

1、电脑网线连接光猫 `网口1`。最好关杀毒软件、安全软件、系统防火墙。（虽然我没关，也没事。）
2、拔掉光纤，重启光猫。**注意：不要插上光纤！直到获取到超级管理员密码！！**
3、运行 `华为光猫ONT使能2.0.exe`，选择 `维修使能`，并选择连接到光猫的网卡，通过刷新选项来确认本机 IP 正确，选择 `主/备模式`，接着点 `启动` 即可。
4、等到光信号灯不亮，LAN1、LAN2、网络E/G三个灯长亮，按下 `停止`，关闭工具。（网上说一两分钟左右，但是实际上只要十来秒）
5、此时已经打开了光猫的 Telnet 功能。
6、再次重启光猫。

### 获取超级管理员密码

1、打开 `putty.exe`，Telnet 模式连接到光猫，使用以下用户名和密码登录。

```bash
用户名：root
密码：adminHW 或 admin
```

2、登录成功后会显示 `WAP>`，看到如此提示即可。

3、可以先试试打开 `tftp32.exe`，然后用下面的命令把文件复制出来后再解密。其中的 `192.168.1.2` 根据本机 IP 修改。

```bash
backup cfg by tftp svrip 192.168.1.2 remotefile hw_ctree.xml
```
4、很有可能是不成功的，提示 backup 命令不存在。这时只能用下面的方法了，继续往下看。（如果能正常运行，可以选择打开第一个参考文章试试后续步骤）

5、依次执行下面的命令。**这里有一点需要注意！！！下面这些命令都是能正常运行的，但是一开始我使用的是 Xshell，在运行某些命令的时候会提示命令不存在，连最基本的 cd 都无法运行。不知道原因，太诡异了。**

```bash
su
#这时会显示 WAP(Dopra Linux)

shell
cd /mnt/jffs2
ls
#看看能不能找到 hw_ctree.xml

cp hw_ctree.xml myconf.xml.gz
aescrypt2 1 myconf.xml.gz tmp
gzip -d myconf.xml.gz

grep telecomadmin myconf.xml
```

6、上面的命令执行完毕后，会显示一大串字符，找到后面的 `LocalAdminPassword=` 之后的 `telecomadmin12345678` 就是超级管理员密码。

7、 完毕！



> 参考文章：
> [华为HG8120C光猫获取超级管理员密码（2021-12-12亲测）](https://blog.csdn.net/Xx745576933/article/details/121895663)
> [破解电信光猫华为HG8120C](https://blog.csdn.net/haven200/article/details/49870931)